/* MD3-like skeleton primitives */
:root {
  --md3-skeleton-base: oklch(0.92 0.055 var(--hue));
  --md3-skeleton-highlight: oklch(0.97 0.07 var(--hue));
}

:root.dark {
  --md3-skeleton-base: oklch(0.34 0.05 var(--hue));
  --md3-skeleton-highlight: oklch(0.43 0.065 var(--hue));
}

@keyframes md3-skeleton-wave {
  0% {
    transform: translateX(-120%);
  }
  100% {
    transform: translateX(120%);
  }
}

.md3-skeleton-surface,
.md3-skeleton-block,
.md3-skeleton-text,
.md3-skeleton-circle {
  position: relative;
  overflow: hidden;
  background: var(--md3-skeleton-base);
}

.md3-skeleton-surface::after,
.md3-skeleton-block::after,
.md3-skeleton-text::after,
.md3-skeleton-circle::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent 0%, transparent 32%, var(--md3-skeleton-highlight) 50%, transparent 68%, transparent 100%);
  animation: md3-skeleton-wave 1.25s ease-in-out infinite;
}

.md3-skeleton-block {
  border-radius: 0.75rem;
}

.md3-skeleton-text {
  width: var(--skeleton-width, 100%);
  height: var(--skeleton-height, 0.875rem);
  border-radius: 9999px;
}

.md3-skeleton-circle {
  border-radius: 9999px;
}

[data-enter-skeleton-placeholder] {
  opacity: 0;
  pointer-events: none;
  transition: opacity 160ms ease;
}

[data-enter-skeleton-content] {
  transition: opacity 120ms ease;
}

html.enter-skeleton-active .transition-main {
  opacity: 1 !important;
  transform: none !important;
}

html.enter-skeleton-awaiting-replace.is-animating.is-leaving .transition-main,
html.enter-skeleton-awaiting-replace.is-animating.is-leaving #content-wrapper {
  opacity: 1 !important;
  transform: none !important;
}

html.enter-skeleton-active[data-enter-skeleton-mode="post-card"] [data-enter-skeleton-target="post-card"] [data-enter-skeleton-content] {
  opacity: 0;
  pointer-events: none;
}

html.enter-skeleton-active[data-enter-skeleton-mode="post-card"] [data-enter-skeleton-target="post-card"] [data-enter-skeleton-placeholder] {
  opacity: 1;
}

html.enter-skeleton-active[data-enter-skeleton-mode="post-detail"] [data-enter-skeleton-target="post-detail"] [data-enter-skeleton-content] {
  opacity: 0;
  pointer-events: none;
}

html.enter-skeleton-active[data-enter-skeleton-mode="post-detail"] [data-enter-skeleton-target="post-detail"] [data-enter-skeleton-placeholder] {
  opacity: 1;
}

html.enter-skeleton-active[data-enter-skeleton-mode="fallback"] [data-enter-skeleton-target="fallback"] [data-enter-skeleton-content] {
  opacity: 0;
  pointer-events: none;
}

html.enter-skeleton-active[data-enter-skeleton-mode="fallback"] [data-enter-skeleton-target="fallback"] [data-enter-skeleton-placeholder] {
  opacity: 1;
}

[data-sidebar-avatar-shell] {
  position: relative;
}

[data-sidebar-avatar-shell] .sidebar-avatar-skeleton {
  position: absolute;
  inset: 0;
  z-index: 20;
  pointer-events: none;
  opacity: 0;
  transition: opacity 180ms ease;
}

[data-sidebar-avatar-shell] [data-sidebar-profile-avatar] {
  opacity: 1;
  transition: opacity 180ms ease;
}

[data-sidebar-avatar-shell][data-avatar-loading="true"] .sidebar-avatar-skeleton {
  opacity: 1;
}

[data-sidebar-avatar-shell][data-avatar-loading="true"] [data-sidebar-profile-avatar] {
  opacity: 0;
}

@media (prefers-reduced-motion: reduce) {
  .md3-skeleton-surface::after,
  .md3-skeleton-block::after,
  .md3-skeleton-text::after,
  .md3-skeleton-circle::after {
    animation: none;
    background: none;
  }
}
